# Валидатор решения VRP задачи

Этот скрипт проверяет корректность выходного файла `solution.json` и вычисляет целевую функцию точно так же, как это делают организаторы соревнования.

## Функциональность

Валидатор проверяет:

1. **Формат файла**: Соответствие структуре `{"routes": [{"courier_id": X, "route": [0, order1, order2, ..., 0]}]}`
2. **Целевую функцию**: Время маршрута = сумма длительностей + сумма сервис-таймов
3. **Ограничения**:
   - Время работы каждого курьера ≤ 12 часов
   - Маршрут начинается и заканчивается на складе (ID=0)
   - Атомарность микрополигонов (один курьер на микрополигон)
   - Отсутствие дублей заказов
4. **Штрафы**:
   - 3000 секунд за каждый неназначенный заказ
   - Большой штраф за превышение 12 часов

## Установка

```bash
pip install -r requirements.txt
```

## Использование

```bash
python validator.py \
    --solution path/to/solution.json \
    --orders path/to/dataSetOrders.json \
    --couriers path/to/dataSetCouriers.json \
    --durations_db path/to/durations.sqlite
```

## Пример вывода

```
============================================================
ОТЧЕТ О ВАЛИДАЦИИ РЕШЕНИЯ
============================================================
Время валидации: 2.34 секунд
Допустимость: НЕТ
Общая стоимость: 2,210,010,207
Общий штраф: 22
Неназначенные заказы: 22

Нарушения (3):
  1. Курьер 15: Превышение лимита 12 часов: 43215 > 43200
  2. Неназначенные заказы: 22

Статистика курьеров:
  Всего курьеров: 280
  Допустимых маршрутов: 279
  Среднее время маршрута: 7893 секунд

Топ-5 самых длинных маршрутов:
  1. Курьер 15: 43215s (40123+3092) ✗
  2. Курьер 42: 39876s (36789+3087) ✓
  3. Курьер 128: 38765s (35678+3087) ✓
  4. Курьер 201: 37654s (34567+3087) ✓
  5. Курьер 67: 36543s (33456+3087) ✓
============================================================
```

## Выходные коды

- `0` - решение валидно
- `1` - решение невалидно или ошибка валидации

## Особенности

- Использует ту же логику расчета, что и организаторы
- Проверяет все ограничения задачи
- Выводит детальную статистику по курьерам
- Показывает топ самых длинных маршрутов
- Время выполнения ~2-5 секунд для полного решения
